<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Duplicate Subtotal Row Removal Function</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for subtotal_dupe_removal {ReportSubtotal}"><tr><td>subtotal_dupe_removal {ReportSubtotal}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Duplicate Subtotal Row Removal Function</h2>

<h3>Description</h3>

<p>If a data report with subtotals
(such as a Group By + subtotal output)
has some sub-sections with only one row / one set of rows,
then the subtotal function will produce row(s) totalling one
row (each). These are duplicate subtotal rows,
which this function removes.
</p>


<h3>Usage</h3>

<pre>
subtotal_dupe_removal(data, column, iterator = 2, skip = 0, remove = "All")
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>data</code></td>
<td>
<p>A data frame or tibble</p>
</td></tr>
<tr valign="top"><td><code>column</code></td>
<td>
<p>The column containing duplicate row labels</p>
</td></tr>
<tr valign="top"><td><code>iterator</code></td>
<td>
<p>The minimum number of rows meant to be between each section. Two if removing duplicate rows.</p>
</td></tr>
<tr valign="top"><td><code>skip</code></td>
<td>
<p>The number of rows to skip removing rows from. Usually zero. Use to dodge NA values.</p>
</td></tr>
<tr valign="top"><td><code>remove</code></td>
<td>
<p>The subtotal label. Usually &quot;All&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A lead() version of the parameter column is added,
which lines up the parameter column with its observations x rows deeper (x = iterator).
If both columns equal y value (y = remove) then there are only (x / 2) rows between them,
making the row a duplicate subtotal row to be removed.
This doesn't work for the last few rows,
so they're covered with another logical statement using our index column.
Those two columns are removed before the output.
</p>


<h3>Value</h3>

<p>The data report without duplicate subtotal rows.
</p>


<h3>Examples</h3>

<pre>
library(dplyr)

group_by(mtcars, cyl, gear, vs) %&gt;% summarise(Sum = sum(disp)) %&gt;%
subtotal_row(mtcars, "disp") %&gt;%
subtotal_dupe_removal(3, skip = 3)
</pre>

<hr /><div style="text-align: center;">[Package <em>ReportSubtotal</em> version 0.0.0.9000 <a href="00Index.html">Index</a>]</div>
</body></html>
